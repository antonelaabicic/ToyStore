<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
</head>

<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="container py-4">
<h1 class="text-center mb-5">Admin Dashboard</h1>

<!-- toy category cards -->
<section class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="text-primary">Toy Categories</h2>
        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addCategoryModal">+ Add Category</button>
    </div>
    <div class="row g-3">
        <div class="col-md-4" th:each="cat : ${categories}">
            <div class="card border-primary shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0 text-center text-white" th:text="${cat.name}">Category Name</h5>
                </div>
                <div class="card-body d-flex justify-content-end gap-2">
                    <button class="btn btn-sm btn-outline-light btn-info"
                            data-bs-toggle="modal"
                            th:attr="data-bs-target='#categoryDetailsModal__' + ${cat.id}">Details</button>
                    <button class="btn btn-sm btn-outline-light btn-warning"
                            data-bs-toggle="modal"
                            th:attr="data-bs-target='#categoryEditModal__' + ${cat.id}">Edit</button>
                    <button class="btn btn-sm btn-outline-light btn-danger"
                            data-bs-toggle="modal"
                            th:attr="data-bs-target='#categoryDeleteModal__' + ${cat.id}">Delete</button>
                </div>
            </div>
        </div>
    </div>
</section>

<hr class="my-5"/>

<!-- toy cards -->
<section>
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="text-success">Toys</h2>
    </div>

    <section class="mb-5">
        <form id="toySearchForm" class="row align-items-end g-2">
            <div class="col-auto">
                <input type="text" class="form-control" name="name" placeholder="Name">
            </div>
            <div class="col-auto">
                <input type="text" class="form-control" name="description" placeholder="Description">
            </div>
            <div class="col-auto">
                <input type="number" step="0.01" class="form-control" name="minPrice" placeholder="Min Price">
            </div>
            <div class="col-auto">
                <input type="number" step="0.01" class="form-control" name="maxPrice" placeholder="Max Price">
            </div>
            <div class="col-auto">
                <select class="form-select" name="categoryString">
                    <option value="">All Categories</option>
                    <option th:each="cat : ${categories}" th:value="${cat.name}" th:text="${cat.name}"></option>
                </select>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
            <div class="col-auto">
                <button type="button" id="clearSearchBtn" class="btn btn-secondary">Clear</button>
            </div>

            <div class="col"></div>
            <div class="col-auto d-flex justify-content-end">
                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addToyModal">+ Add Toy</button>
            </div>
        </form>
    </section>

    <div class="row g-4">
        <div class="col-md-4" th:each="toy : ${toys}">
            <div class="card border-success shadow-sm h-100">

                <div class="d-flex justify-content-center align-items-center bg-light" style="height: 200px; overflow: hidden;">
                    <img th:src="@{${toy.imageUrl}}" alt="Toy Image"
                         class="img-fluid"
                         style="max-height: 100%; object-fit: contain;">
                </div>

                <div class="card-body">
                    <h5 class="card-title text-center" th:text="${toy.name}">Toy Name</h5>

                    <ul class="list-unstyled">
                        <li><strong>Category:</strong> <span th:text="${toy.categoryString}">Category</span></li>
                        <li><strong>Price:</strong> <span th:text="${toy.price}">0.00</span> EUR</li>
                        <li class="mt-2">
                            <p class="text-muted mb-0" th:text="${toy.description}"></p>
                        </li>
                    </ul>
                </div>

                <div class="card-footer d-flex justify-content-end gap-2">
                    <button class="btn btn-sm btn-outline-light btn-info"
                            data-bs-toggle="modal"
                            th:attr="data-bs-target='#toyDetailsModal__' + ${toy.id}">Details</button>
                    <button class="btn btn-sm btn-outline-light btn-warning"
                            data-bs-toggle="modal"
                            th:attr="data-bs-target='#toyEditModal__' + ${toy.id}">Edit</button>
                    <button class="btn btn-sm btn-outline-light btn-danger"
                            data-bs-toggle="modal"
                            th:attr="data-bs-target='#toyDeleteModal__' + ${toy.id}">Delete</button>
                </div>
            </div>
        </div>
    </div>
</section>

    <div th:replace="fragments/toy_category_modals :: modals"></div>
    <div th:replace="fragments/toy_modals :: modals"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/dashboard.js"></script>
<script src="/js/badge.js"></script>

</body>
</html>
